<!DOCTYPE html>
<html>
    <head>
        <title>Dungeon Master Database</title>
        <!--<link href="https://fonts.googleapis.com/css?family=Inconsolata&display=swap" rel="stylesheet"> -->
        <link rel="stylesheet" type="text/css" href="DMD.css"> 
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel="stylesheet">
    </head>
<body>
    
    <div id="topBar">
        <div class = "title">Dungeons &amp; Dragons &amp; Databases</div>
    </div>
    
    <div id="mainContent">

        
    </div>
    
    
    
    
    
    
    
    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-database.js"></script>



    <script>
    // Your web app's Firebase configuration
        var firebaseConfig = {
        apiKey: "AIzaSyBU42Ht6VsiJ6rSZ5VfJJno_SV8jyG4qvU",
        authDomain: "benbrinkman-1d46e.firebaseapp.com",
        databaseURL: "https://benbrinkman-1d46e.firebaseio.com",
        projectId: "benbrinkman-1d46e",
        storageBucket: "benbrinkman-1d46e.appspot.com",
        messagingSenderId: "221991902624",
        appId: "1:221991902624:web:92ebe45daf3ece64ac58c5",
        measurementId: "G-YF3NDT9KGK"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        var database = firebase.database();

        Tiles(1, 3);
        
        function Tiles(margin, numTiles){
            var tile = document.getElementsByClassName("tile");
            var tileWidth = (100-((numTiles+1)*margin))/numTiles;
            for (var i = 0; i < tile.length; i++){
                tile[i].style.marginTop=margin+"%";
                tile[i].style.marginLeft=margin+"%";
                tile[i].style.width=tileWidth+"%";
            }
            
        }

        
        const numberOfUsers = 116;
        const randomIndex = Math.floor(Math.random() * numberOfUsers);

        var ref = firebase.database().ref('0/0/feats');

        ref.limitToFirst(randomIndex).limitToLast(1).once('value').then(snapshot =>
                                                                        {
            var username = snapshot.val().description;
            document.getElementById("mainContent").innerHTML = username;
            console.log(username);
            // do something with the user data
        });
        

//        var testVar = firebase.database().ref('/0/0/feats/charger').once('value').then(function(snapshot) {
//            //var username = (snapshot.val() && snapshot.val().fighterclass) || 'Anonymous';
//            var username = snapshot.val().description;
//            document.getElementById("mainContent").innerHTML = username;
//            console.log(username);
//        });



        function writeUserData(userId, name, email, imageUrl) {
            firebase.database().ref('users/' + userId).set({
                username: name,
                email: email,
                profile_picture : imageUrl
            });
        }

        firebase.analytics();

    </script>
</body>
</html>