<!DOCTYPE html>
<html>
    <head>
        <title>Dungeon Master Database</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="index.css">
    </head>
    <body>
        <script src="BengeonHeader.js"></script>


        <div id="content">
            <div class="tile">
                <div class="tileImg">
                    <img src="img/pricesandobjects1.png" alt="Prices and Objects">
                </div>
                <div class="tileLabel">
                    <div class = "tileLabelText">
                        Prices and Objects
                    </div>
                </div>
            </div>
            <div class="tile">
                <div class="tileImg">
                    <img id="test" src="">
                </div>
                <div class="tileLabel">
                    <div class = "tileLabelText">
                        Random Generator
                    </div>
                </div>
            </div>
            <div class="tile">
                <div class="tileImg"></div>
                <div class="tileLabel">
                    <div class = "tileLabelText">
                        Magic items
                    </div>
                </div>
            </div>
            <div class="tile">
                <div class="tileImg"></div>
                <div class="tileLabel">
                    <div class = "tileLabelText">
                        Spells
                    </div>
                </div>
            </div>
            <div class="tile">
                <div class="tileImg"></div>
                <div class="tileLabel">
                    <div class = "tileLabelText">
                        Monsters
                    </div>
                </div>
            </div>
            <div class="tile">
                <div class="tileImg"></div>
                <div class="tileLabel">
                    <div class = "tileLabelText">
                        Classes
                    </div>
                </div>
            </div>

        </div>


        <script>
            Tiles(1, 3);
            function Tiles(margin, numTiles){
                var tile = document.getElementsByClassName("tile");
                var tileWidth = (100-((numTiles+1)*margin))/numTiles;
                for (var i = 0; i < tile.length; i++){
                    tile[i].style.marginTop=margin+"%";
                    tile[i].style.marginLeft=margin+"%";
                    tile[i].style.width=tileWidth+"%";
                }
            }
            
            var imgBase = "https://media.miniaturemarket.com/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/d/d/"
            
            var url = "https://www.miniaturemarket.com/ddvmf-040.html"
//            console.log(url);
//            console.log($x("//span[@class='price'])"));
           
            
            function returnImg(_url){
//                var result = /[^/]*$/.exec(_url)[0];
                var lastIndexOfSlash = _url.lastIndexOf('/')+1;
                var lastIndexOfDot = _url.lastIndexOf('.');
                var imgName = _url.substring(lastIndexOfSlash, lastIndexOfDot);
                var result = imgBase + imgName + ".jpg";
                console.log(result);
                return result;
            }
            
            var request = new XMLHttpRequest();
            request.open("GET", "https://www.miniaturemarket.com/ddvmf-040.html", true);  // last parameter must be true
            request.responseType = "document";
            request.onload = function (e) {
                if (request.readyState === 4) {
                    if (request.status === 200) {
                        console.log("nice");
                    } else {
                        console.error(request.status, request.statusText);
                    }
                }
            };
            request.onerror = function (e) {
                console.error(request.status, request.statusText);
            };
            request.send(null);  // not a POST request, so don't send extra data
            
        </script>

    </body>
</html>